(window.webpackJsonp=window.webpackJsonp||[]).push([[52],{400:function(a,t,s){"use strict";s.r(t);var r=s(42),e=Object(r.a)({},(function(){var a=this,t=a.$createElement,s=a._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[s("h1",{attrs:{id:"mysql-分库分表"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#mysql-分库分表"}},[a._v("#")]),a._v(" mysql 分库分表")]),a._v(" "),s("h2",{attrs:{id:"分表方式"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#分表方式"}},[a._v("#")]),a._v(" 分表方式")]),a._v(" "),s("p",[a._v("垂直分表：根据业务分表")]),a._v(" "),s("p",[a._v("水平分表：根据数据分表")]),a._v(" "),s("h2",{attrs:{id:"分库分表的问题"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#分库分表的问题"}},[a._v("#")]),a._v(" 分库分表的问题")]),a._v(" "),s("ol",[s("li",[a._v("跨节点连接查询问题（分页、排序）：两张表存在不同的库中，需要进行多次查询。")]),a._v(" "),s("li",[a._v("多数据源管理问题：一个服务中可能包含多个数据源。")])]),a._v(" "),s("h2",{attrs:{id:"mycat"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#mycat"}},[a._v("#")]),a._v(" Mycat")]),a._v(" "),s("p",[a._v("MyCat技术原理中最重要的一个动词是“拦截”，它拦截了用户发送过来的SQL语句，首先对SQL语句做了一些特定的分析：如分片分析、路由分析、读写分离分析、缓存分析等，然后将此SQL发往后端的真实数据库，并将返回的结果做适当的处理，最终再返回给用户。")]),a._v(" "),s("p",[s("img",{attrs:{src:"https://img-blog.csdn.net/20161115203440997",alt:"非分片字段查询"}})]),a._v(" "),s("h2",{attrs:{id:"sharding-jdbc"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#sharding-jdbc"}},[a._v("#")]),a._v(" Sharding JDBC")]),a._v(" "),s("blockquote",[s("p",[a._v("轻量级的 Java 框架，增强版的 JDBC")])]),a._v(" "),s("div",{staticClass:"language-properties extra-class"},[s("pre",{pre:!0,attrs:{class:"language-properties"}},[s("code",[s("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("spring.shardingsphere.datasource.names")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("ds")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("spring.shardingsphere.datasource.ds.type")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("com.alibaba.druid.pool.DruidDataSource")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("spring.shardingsphere.datasource.ds.driver-class-name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("com.mysql.cj.jdbc.Driver")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("spring.shardingsphere.datasource.ds.url")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("jdbc:mysql://127.0.0.1:3306/tripper?useUnicode=true&characterEncoding=UTF-8&useSSL=false&serverTimezone=Asia/Shanghai")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("spring.shardingsphere.datasource.ds.username")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("root")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("spring.shardingsphere.datasource.ds.password")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("root")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("spring.shardingsphere.sharding.tables.t_order.actual-data-nodes")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("ds.t_order$->{1..2}")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("spring.shardingsphere.sharding.tables.t_order.key-generator.column")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("id")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("spring.shardingsphere.sharding.tables.t_order.key-generator.type")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("SNOWFLAKE")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("spring.shardingsphere.sharding.tables.t_order.table-strategy.inline.sharding-column")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("id")]),a._v("\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("spring.shardingsphere.sharding.tables.t_order.table-strategy.inline.algorithm-expression")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("t_order$->{id % 2 + 1}")]),a._v("\n\n"),s("span",{pre:!0,attrs:{class:"token attr-name"}},[a._v("spring.main.allow-bean-definition-overriding")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("=")]),s("span",{pre:!0,attrs:{class:"token attr-value"}},[a._v("true")]),a._v("\n")])])])])}),[],!1,null,null,null);t.default=e.exports}}]);
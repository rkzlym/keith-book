# ES 基础

## 数据库查询的问题

假设有下列查询，由于是模糊匹配，如%在前面，索引不生效。

原因：数据库索引本质就是排序，当%在后面时，可以通过排序快速地缩小搜索范围，而当%在前面时，数据库就并能使用排序

```sql
select * from product where brand like '%小米手机%'
```

而且数据库不支持分词，无法通过分词给用户想要的结果

## 倒排索引

数据结构

1. 包含这个关键词的 Document list
2. 关键词在每个 Doc 中出现的次数 TF ( Term Frequency )：TF 越高相关度越高
3. 关键词在整个索引中出现的次数 IDF ( Inverse Doc Frequency )：IDF 越高相关度越低
4. 关键词在当前 Doc 中出现的次数
5. 每个 Doc 的长度，越长相关度越低
6. 包含这个字段的关键词的所有 Doc 的平均长度

